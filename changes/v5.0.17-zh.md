# v5.0.17

## 增强

- [#9802](https://github.com/emqx/emqx/pull/9802) 现在 dashboard 增加了对 `HAProxy` 协议的支持。

- [#9871](https://github.com/emqx/emqx/pull/9871) 允许占位符出现在 `authz` 规则中的主题里的任意位置。
  例如:
  `{allow, {username, "who"}, publish, ["t/foo${username}boo/${clientid}xxx"]}.`

- [#9910](https://github.com/emqx/emqx/pull/9910) 在桥接 API 中增加 `start` 操作，允许失败后手动重新连接。

- [#9917](https://github.com/emqx/emqx/pull/9917) 停止构建-alpine docker镜像，因为它的大小比基于debian slim的普通镜像要大。

- [#9930](https://github.com/emqx/emqx/pull/9930) 将统计数据 `live_connections.count` 和 `live_connections.max` 公开给 Prometheus.

- [#9936](https://github.com/emqx/emqx/pull/9936) 在发行版中默认禁用diskup（os_mon的一部分）。

## 修复

- [#9864](https://github.com/emqx/emqx/pull/9864) 修复会话清除后相关的排他订阅主题没有被清理的问题。

- [#9875](https://github.com/emqx/emqx/pull/9875) 当通过 HTTP API 上传一个损坏的插件包时，返回 `400`，且删除该插件包。

- [#9916](https://github.com/emqx/emqx/pull/9916) 修复MQTT桥接器无法验证TLS通配符服务器证书的问题。

- [#9922](https://github.com/emqx/emqx/pull/9922) 修复桥接资源缓冲区的问题，如果足够多的异步查询在失败并出现可重试错误之前将机上窗口填满，则可能会卡住。

- [#9923](https://github.com/emqx/emqx/pull/9923) 修复在启动和关闭过程中发生错误时，日志中的 REPORT_CB/2 CRASH 错误。

- [#9938](https://github.com/emqx/emqx/pull/9938) 将一些出口 MQTT 网桥错误报告为可恢复，因此可重试。

- [#9946](https://github.com/emqx/emqx/pull/9946) MQTT 桥接配置参数 `reconnect_interval` 在 v5.0.16/e5.0.0 中被错误删除，
  导致旧版本配置在升级后无法使用。此修复把配置加回，但是值会忽略。

- [#9951](https://github.com/emqx/emqx/pull/9951) 返回桥接 API 操作(`start|stop|restart`) 的多节点远程调用的错误信息。

- [#9952](https://github.com/emqx/emqx/pull/9952) 不允许对 ingress MQTT 网桥的 QoS 2 进行订阅。
  但允许用户为 ingress MQTT 桥配置 "clean_start" 选项。
